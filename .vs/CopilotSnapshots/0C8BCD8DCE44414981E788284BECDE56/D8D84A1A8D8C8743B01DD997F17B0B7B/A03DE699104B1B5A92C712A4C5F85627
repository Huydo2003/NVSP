/**
 * Navigation.jsx - Menu điều hướng
 * 
 * Chức năng:
 * - Hiển thị menu theo vai trò
 * - Quản lý chuyển trang
 * - Hiển thị thông tin người dùng
 * - Xử lý đăng xuất
 */

import { useApp } from '../hooks/useApp';

export default function Navigation({ activeTab, setActiveTab, user, onLogout }) {
  const { state } = useApp();
  const { config } = state;

  const getMenuItems = () => {
    const baseItems = [
      { id: 'account', label: 'Tài khoản' }
    ];

    if (user.role === 'Admin' || user.role === 'admin') {
      return [
        ...baseItems,
        { id: 'users', label: 'Quản lý người dùng' },
        { id: 'giang_vien', label: 'Quản lý giảng viên' },
        { id: 'bcn_khoa', label: 'Quản lý BCN Khoa' }
      ];
    }

    return baseItems;
  };

  return (
    <nav className="gradient-bg text-white w-64 min-h-full p-4 slide-in">
      <div className="mb-8">
        <h1 className="text-xl font-bold mb-2">{config.system_title}</h1>
        <div className="text-sm opacity-90">
          <p>{user.username || user.name || 'Người dùng'}</p>
          <p className="text-xs">{user.email}</p>
        </div>
      </div>
      
      <ul className="space-y-2">
        {getMenuItems().map(item => (
          <li key={item.id}>
            <button
              onClick={() => setActiveTab(item.id)}
              className={`nav-item w-full text-left px-3 py-2 ${
                activeTab === item.id ? 'active' : ''
              }`}
            >
              <span>{item.label}</span>
            </button>
          </li>
        ))}
      </ul>
      
      <div className="mt-8 pt-4 border-t border-white/20">
        <button
          onClick={onLogout}
          className="nav-item w-full text-left px-3 py-2 text-red-200 hover:text-white"
        >
          <span>Đăng xuất</span>
        </button>
      </div>
    </nav>
  );
}